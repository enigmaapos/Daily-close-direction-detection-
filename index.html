<!doctype html><html lang="en"><head><meta charset="utf-8"/><title>15m Strong Bull Probability ‚Äî Pro Scanner</title><meta name="viewport" content="width=device-width,initial-scale=1"/><style>
body{font-family:Inter,system-ui,Arial;background:#0f1720;color:#e6eef8;margin:16px}
h1{font-size:18px;margin-bottom:6px}
h2{font-size:16px;margin-top:14px}
.muted{color:#9fb3cc;font-size:13px}
button,input{padding:8px 12px;border-radius:6px;border:1px solid #334155;background:#0b1220;color:#e6eef8}
button.primary{background:#22c55e;border:0;color:#042e16;font-weight:700;cursor:pointer}
button.secondary{background:#334155;border:0;cursor:pointer}
.row{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:10px}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:12px;margin-top:10px}
.card{background:#0b1220;border:1px solid #172033;border-radius:10px;padding:12px}
.bull{color:#22c55e}.bear{color:#fb7185}.neutral{color:#facc15}.prob{font-weight:700}
</style></head><body>

<h1>üìä 15m Strong Bull Probability ‚Äî Pro Scanner</h1>
<div class="muted" id="status">Idle</div>
<div style="height:6px;background:#0b1220;border-radius:6px;overflow:hidden">
  <div id="pb" style="height:100%;width:0%;background:#22c55e;transition:width .2s"></div>
</div>

<div class="row">
<button class="primary" onclick="runScan()">Run Scan</button>
<button class="secondary" onclick="toggleAuto()">Auto Refresh</button>
<div class="muted" id="timestamp"></div>
</div>

<div class="row">
<input id="symbolSearch" placeholder="Search symbol (BTCUSDT)"/>
<button class="secondary" onclick="runSearch()">Analyze</button>
</div>

<h2>üü¢ STRONG BULL / EARLY WEAK BEAR (15m)</h2><div class="grid" id="greenGrid"></div>
<h2>üî¥ Strong / Weak Bear (Context)</h2><div class="grid" id="redGrid"></div>
<h2>üîç Manual Analysis (All Results)</h2><div class="grid" id="searchGrid"></div>

<audio id="alertSound"><source src="https://actions.google.com/sounds/v1/alarms/beep_short.ogg"></audio>

<script>
const g=document.getElementById("greenGrid"),r=document.getElementById("redGrid"),s=document.getElementById("searchGrid"),
st=document.getElementById("status"),ts=document.getElementById("timestamp"),q=document.getElementById("symbolSearch"),
a=document.getElementById("alertSound"),pb=document.getElementById("pb");
const ci=new Map(),lu=new Map();let at=null,pcur=0,ptotal=0;
const API="https://fapi.binance.com",DELAY=300,AUTO=3e5;
const BL=new Set(["ALPACAUSDT","BNXUSDT","ALPHAUSDT","OCEANUSDT","DGBUSDT","AGIXUSDT","LINAUSDT","LOKAUSDT","KEYUSDT","MDTUSDT","LOOMUSDT","RENUSDT","OMNIUSDT","SLERFUSDT","STMXUSDT","UXLINKUSDT","BSWUSDT","NEIROETHUSDT","VIDTUSDT","TROYUSDT","BAKEUSDT","MEMEFIUSDT","NULSUSDT","HIFIUSDT","LEVERUSDT","XEMUSDT","STRAXUSDT","COMBOUSDT","AI16ZUSDT","MILKUSDT","TOKENUSDT","SXPUSDT","MYROUSDT","1000XUSDT","DARUSDT","PORT3USDT","SKATEUSDT","AIAUSDT","AMBUSDT","FLMUSDT","PERPUSDT","OBOLUSDT"]);
const sl=m=>new Promise(r=>setTimeout(r,m)),now=()=>new Date().toLocaleTimeString();
const fj=async u=>(await fetch(u)).json();
const ema=(v,p)=>{let k=2/(p+1),e=v[0];for(let i=1;i<v.length;i++)e=v[i]*k+e*(1-k);return e};
const rsi=(c,p=14)=>{let g=0,l=0;for(let i=1;i<=p;i++){let d=c[i]-c[i-1];d>0?g+=d:l-=d}
let rs=g/(l||1),r=100-(100/(1+rs));
for(let i=p+1;i<c.length;i++){let d=c[i]-c[i-1];
d>0?(g=(g*(p-1)+d)/p,l=(l*(p-1))/p):(g=(g*(p-1))/p,l=(l*(p-1)-d)/p);
rs=g/(l||1);r=100-(100/(1+rs))}return r};

const upd=()=>pb.style.width=Math.min(100,Math.round(pcur/ptotal*100))+"%";

async function analyze(sym,bear=false,dd=null){
const k=await fj(`${API}/fapi/v1/klines?symbol=${sym}&interval=15m&limit=120`);await sl(DELAY);
const c=k.map(x=>+x[4]),v=k.map(x=>+x[5]),l=k[k.length-1];
let s=0,av=v.slice(-40).reduce((a,b)=>a+b,0)/40,e=ema(c.slice(-60),50),ri=rsi(c);
if(!bear){l[4]>e&&s++;l[4]>k[k.length-2][4]&&s++;ri>50&&s++;l[5]>av&&s++}
else{l[4]<e&&s++;l[4]<k[k.length-2][4]&&s++;ri<50&&s++;l[5]>av&&s++}
if(dd!=null){if(!bear){dd>=-1&&s++;dd<=-7&&(s-=2);dd<=-4&&(s--)}else{dd<=-1&&s++;dd>-1&&(s--)}}
s=Math.max(0,Math.min(5,s));
return{sym,prob:s*20,bias:s>=4?(bear?"Strong Bear":"Strong Bull"):s==3?(bear?"Weak Bear":"Weak Bull"):s==2?"Neutral":(bear?"Weak Bull":"Weak Bear")}
}

async function runScan(){
st.innerText="Scanning...";pb.style.width="0%";pcur=0;
const t=await fj(`${API}/fapi/v1/ticker/24hr`);
const u=t.filter(x=>x.symbol.endsWith("USDT")&&!BL.has(x.symbol));
ptotal=60;

for(const x of u.sort((a,b)=>b.priceChangePercent-a.priceChangePercent).slice(0,40)){
const dd=(x.lastPrice-x.highPrice)/x.highPrice*100,r1=await analyze(x.symbol,false,dd);r1.drawdown=dd;
if(r1.bias==="Strong Bull"||r1.bias==="Weak Bear"){
  r1.prob>=80&&a.play();render(r1,g)
}
pcur++;upd()
}

for(const x of u.sort((a,b)=>a.priceChangePercent-b.priceChangePercent).slice(0,20)){
const dd=(x.lastPrice-x.highPrice)/x.highPrice*100,r2=await analyze(x.symbol,true,dd);
r2.drawdown=dd;render(r2,r);pcur++;upd()
}

ts.innerText="Last scan: "+new Date().toLocaleString();st.innerText="Completed"
}

async function runSearch(){
const sym=q.value.trim().toUpperCase();if(!sym.endsWith("USDT")||BL.has(sym))return;
s.innerHTML="";const t=await fj(`${API}/fapi/v1/ticker/24hr?symbol=${sym}`);
const dd=(t.lastPrice-t.highPrice)/t.highPrice*100,r3=await analyze(sym,t.priceChangePercent<0,dd);
r3.drawdown=dd;render(r3,s)
}

function toggleAuto(){if(at){clearInterval(at);at=null;st.innerText="Auto refresh stopped";return}
runScan();at=setInterval(runScan,AUTO);st.innerText="Auto refresh running"}

function render(d,el){
let c=ci.get(d.sym);lu.set(d.sym,now());
let pc=d.bias.includes("Bull")?"bull":d.bias.includes("Bear")?"bear":"neutral";
let dc=d.drawdown>=-1?"bull":d.drawdown<=-4?"bear":"neutral";
if(!c){c=document.createElement("div");c.className="card";ci.set(d.sym,c)}
c.parentNode!==el&&el.appendChild(c);
c.innerHTML=`<b>${d.sym}</b>
<div class="prob ${pc}">${d.bias} ‚Äî ${d.prob}%</div>
<div class="muted ${dc}">24h Drawdown: ${d.drawdown.toFixed(2)}%</div>
<div class="muted">Updated: ${lu.get(d.sym)}</div>`
}
</script></body></html>
