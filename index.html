<!doctype html><html lang="en"><head><meta charset="utf-8"/>
<title>15m Bull / Bear Probability â€” Pro Scanner</title>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<style>
body{font-family:Inter,system-ui,Arial;background:#0f1720;color:#e6eef8;margin:16px}
h1{font-size:18px;margin-bottom:6px}
h2{font-size:16px;margin-top:14px}
.muted{color:#9fb3cc;font-size:13px}
button,input{padding:8px 12px;border-radius:6px;border:1px solid #334155;background:#0b1220;color:#e6eef8}
button.primary{background:#22c55e;border:0;color:#042e16;font-weight:700;cursor:pointer}
button.secondary{background:#334155;border:0;cursor:pointer}
.row{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:10px}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:12px;margin-top:10px}
.card{background:#0b1220;border:1px solid #172033;border-radius:10px;padding:12px}
.bull{color:#22c55e}.bear{color:#fb7185}.neutral{color:#facc15}.prob{font-weight:700}
</style></head><body>

<h1>ðŸ“Š 15m Strong Bull / Bear Probability â€” Pro Scanner</h1>
<div class="muted" id="status">Idle</div>

<div class="row">
<button class="primary" onclick="runScan()">Run Scan</button>
<button class="secondary" onclick="toggleAuto()">Auto Refresh</button>
<div class="muted" id="ts"></div>
</div>

<h2>ðŸŸ¢ Strong Bull / Weak Bear (â‰¥20%)</h2><div class="grid" id="g"></div>
<h2>ðŸ”´ Strong Bear / Weak Bull (â‰¥20%)</h2><div class="grid" id="r"></div>

<script>
const g=document.getElementById("g"),r=document.getElementById("r"),
st=document.getElementById("status"),ts=document.getElementById("ts");
let auto=null;
const API="https://fapi.binance.com",D=300,AUTO=3e5;
const BL=new Set(["ALPACAUSDT","BNXUSDT","ALPHAUSDT","OCEANUSDT","DGBUSDT","AGIXUSDT","LINAUSDT","LOKAUSDT","KEYUSDT","MDTUSDT","LOOMUSDT","RENUSDT","OMNIUSDT","SLERFUSDT","STMXUSDT","UXLINKUSDT","BSWUSDT","NEIROETHUSDT","VIDTUSDT","TROYUSDT","BAKEUSDT","MEMEFIUSDT","NULSUSDT","HIFIUSDT","LEVERUSDT","XEMUSDT","STRAXUSDT","COMBOUSDT","AI16ZUSDT","MILKUSDT","TOKENUSDT","SXPUSDT","MYROUSDT","1000XUSDT","DARUSDT","PORT3USDT","SKATEUSDT","AIAUSDT","AMBUSDT","FLMUSDT","PERPUSDT","OBOLUSDT"]);
const sl=m=>new Promise(r=>setTimeout(r,m));
const fj=async u=>(await fetch(u)).json();
const ema=(v,p)=>{let k=2/(p+1),e=v[0];for(let i=1;i<v.length;i++)e=v[i]*k+e*(1-k);return e};
const rsi=(c,p=14)=>{let g=0,l=0;for(let i=1;i<=p;i++){let d=c[i]-c[i-1];d>0?g+=d:l-=d}
let rs=g/(l||1),r=100-(100/(1+rs));
for(let i=p+1;i<c.length;i++){let d=c[i]-c[i-1];
d>0?(g=(g*(p-1)+d)/p,l=(l*(p-1))/p):(g=(g*(p-1))/p,l=(l*(p-1)-d)/p);
rs=g/(l||1);r=100-(100/(1+rs))}return r};

async function analyze(sym,bear,dd){
const k=await fj(`${API}/fapi/v1/klines?symbol=${sym}&interval=15m&limit=120`);await sl(D);
const c=k.map(x=>+x[4]),v=k.map(x=>+x[5]),l=k[k.length-1];
let s=0,av=v.slice(-40).reduce((a,b)=>a+b,0)/40,e=ema(c.slice(-60),50),ri=rsi(c);
if(!bear){l[4]>e&&s++;l[4]>k[k.length-2][4]&&s++;ri>50&&s++;l[5]>av&&s++}
else{l[4]<e&&s++;l[4]<k[k.length-2][4]&&s++;ri<50&&s++;l[5]>av&&s++}
if(!bear){dd>=-1&&s++;dd<=-7&&(s-=2);dd<=-4&&(s--)}
else{dd<=-1&&s++;dd>-1&&(s--)}
s=Math.max(0,Math.min(5,s));
return{sym,prob:s*20,bias:s>=4?(bear?"Strong Bear":"Strong Bull"):s==3?(bear?"Weak Bear":"Weak Bull"):s==2?"Neutral":(bear?"Weak Bull":"Weak Bear"),dd}
}

const card=x=>`<div class="card"><b>${x.sym}</b><div class="prob ${x.bias.includes("Bull")?"bull":"bear"}">${x.bias} â€” ${x.prob}%</div><div class="muted">24h DD: ${x.dd.toFixed(2)}%</div></div>`;

async function runScan(){
st.innerText="Scanning...";g.innerHTML="";r.innerHTML="";
const t=await fj(`${API}/fapi/v1/ticker/24hr`);
const u=t.filter(x=>x.symbol.endsWith("USDT")&&!BL.has(x.symbol));

for(const x of u.sort((a,b)=>b.priceChangePercent-a.priceChangePercent).slice(0,40)){
const dd=(x.lastPrice-x.highPrice)/x.highPrice*100,res=await analyze(x.symbol,false,dd);
if(res.bias==="Strong Bull"||(res.bias==="Weak Bear"&&res.prob>=20))g.innerHTML+=card(res)
}

for(const x of u.sort((a,b)=>a.priceChangePercent-b.priceChangePercent).slice(0,20)){
const dd=(x.lastPrice-x.highPrice)/x.highPrice*100,res=await analyze(x.symbol,true,dd);
if(res.bias==="Strong Bear"||(res.bias==="Weak Bull"&&res.prob>=20))r.innerHTML+=card(res)
}

ts.innerText=new Date().toLocaleString();st.innerText="Completed"
}

function toggleAuto(){if(auto){clearInterval(auto);auto=null;st.innerText="Auto stopped";return}
a
runScan();auto=setInterval(runScan,AUTO);st.innerText="Auto running"}
</script></body></html>
